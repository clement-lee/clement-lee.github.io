<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>0 Introduction to R | Lancaster University MATH550/SCC.461 R Programming</title>
  <meta name="description" content="0 Introduction to R | Lancaster University MATH550/SCC.461 R Programming" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="0 Introduction to R | Lancaster University MATH550/SCC.461 R Programming" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="0 Introduction to R | Lancaster University MATH550/SCC.461 R Programming" />
  
  
  

<meta name="author" content="Lecturer: Dr Clement Lee" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="data-manipulation-and-plotting-in-r.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li><a href="introduction-to-r.html#introduction-to-r"><strong>0</strong> Introduction to R</a><ul>
<li class="chapter" data-level="0.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>0.1</b> Background</a></li>
<li class="chapter" data-level="0.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#saving-your-work"><i class="fa fa-check"></i><b>0.2</b> Saving your work</a></li>
<li class="chapter" data-level="0.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#getting-started"><i class="fa fa-check"></i><b>0.3</b> Getting started</a></li>
<li class="chapter" data-level="0.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#getting-help"><i class="fa fa-check"></i><b>0.4</b> Getting Help</a></li>
<li class="chapter" data-level="0.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-scripts"><i class="fa fa-check"></i><b>0.5</b> R scripts</a></li>
<li class="chapter" data-level="0.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#functions"><i class="fa fa-check"></i><b>0.6</b> Functions</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="data-manipulation-and-plotting-in-r.html"><a href="data-manipulation-and-plotting-in-r.html"><i class="fa fa-check"></i><b>1</b> Data manipulation and plotting in R</a><ul>
<li class="chapter" data-level="1.1" data-path="data-manipulation-and-plotting-in-r.html"><a href="data-manipulation-and-plotting-in-r.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a></li>
<li class="chapter" data-level="1.2" data-path="data-manipulation-and-plotting-in-r.html"><a href="data-manipulation-and-plotting-in-r.html#working-with-data-in-r"><i class="fa fa-check"></i><b>1.2</b> Working with data in R</a></li>
<li class="chapter" data-level="1.3" data-path="data-manipulation-and-plotting-in-r.html"><a href="data-manipulation-and-plotting-in-r.html#data-types"><i class="fa fa-check"></i><b>1.3</b> Data Types</a></li>
<li class="chapter" data-level="1.4" data-path="data-manipulation-and-plotting-in-r.html"><a href="data-manipulation-and-plotting-in-r.html#logical-comparisons-and-boolean-operations"><i class="fa fa-check"></i><b>1.4</b> Logical comparisons and Boolean operations</a></li>
<li class="chapter" data-level="1.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basic-plots"><i class="fa fa-check"></i><b>1.5</b> Basic Plots</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="loops-conditional-statements-and-simulation.html"><a href="loops-conditional-statements-and-simulation.html"><i class="fa fa-check"></i><b>2</b> Loops, Conditional Statements, and Simulation</a><ul>
<li class="chapter" data-level="2.1" data-path="loops-conditional-statements-and-simulation.html"><a href="loops-conditional-statements-and-simulation.html#before-you-start"><i class="fa fa-check"></i><b>2.1</b> Before you start</a></li>
<li class="chapter" data-level="2.2" data-path="loops-conditional-statements-and-simulation.html"><a href="loops-conditional-statements-and-simulation.html#loops"><i class="fa fa-check"></i><b>2.2</b> Loops</a></li>
<li class="chapter" data-level="2.3" data-path="loops-conditional-statements-and-simulation.html"><a href="loops-conditional-statements-and-simulation.html#conditional-statements"><i class="fa fa-check"></i><b>2.3</b> Conditional statements</a></li>
<li class="chapter" data-level="2.4" data-path="loops-conditional-statements-and-simulation.html"><a href="loops-conditional-statements-and-simulation.html#probability-and-simulation"><i class="fa fa-check"></i><b>2.4</b> Probability and Simulation</a></li>
<li class="chapter" data-level="2.5" data-path="loops-conditional-statements-and-simulation.html"><a href="loops-conditional-statements-and-simulation.html#combining-loops-and-simulation"><i class="fa fa-check"></i><b>2.5</b> Combining Loops and Simulation</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="time-manipulation.html"><a href="time-manipulation.html"><i class="fa fa-check"></i><b>3</b> Time manipulation</a><ul>
<li class="chapter" data-level="3.1" data-path="time-manipulation.html"><a href="time-manipulation.html#from-last-week"><i class="fa fa-check"></i><b>3.1</b> From last week</a></li>
<li class="chapter" data-level="3.2" data-path="time-manipulation.html"><a href="time-manipulation.html#dates-and-timestamps-in-r"><i class="fa fa-check"></i><b>3.2</b> Dates and timestamps in R</a></li>
<li class="chapter" data-level="3.3" data-path="time-manipulation.html"><a href="time-manipulation.html#summarising-data-over-time"><i class="fa fa-check"></i><b>3.3</b> Summarising data over time</a></li>
<li class="chapter" data-level="3.4" data-path="time-manipulation.html"><a href="time-manipulation.html#a-timestamp-split-over-several-columns"><i class="fa fa-check"></i><b>3.4</b> A timestamp split over several columns</a></li>
<li class="chapter" data-level="3.5" data-path="time-manipulation.html"><a href="time-manipulation.html#time-zones"><i class="fa fa-check"></i><b>3.5</b> Time zones</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="string-processing.html"><a href="string-processing.html"><i class="fa fa-check"></i><b>4</b> String processing</a><ul>
<li class="chapter" data-level="4.1" data-path="string-processing.html"><a href="string-processing.html#preamble"><i class="fa fa-check"></i><b>4.1</b> Preamble</a></li>
<li class="chapter" data-level="4.2" data-path="string-processing.html"><a href="string-processing.html#introducing-regular-expressions"><i class="fa fa-check"></i><b>4.2</b> Introducing regular expressions</a></li>
<li class="chapter" data-level="4.3" data-path="string-processing.html"><a href="string-processing.html#working-with-strings-and-regular-expressions"><i class="fa fa-check"></i><b>4.3</b> Working with strings and regular expressions</a></li>
<li class="chapter" data-level="4.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#exercises"><i class="fa fa-check"></i><b>4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="web-scraping-interactive-graphics-shiny-apps-package-building-and-more.html"><a href="web-scraping-interactive-graphics-shiny-apps-package-building-and-more.html"><i class="fa fa-check"></i><b>5</b> Web scraping, interactive graphics, Shiny Apps, package building, and more</a><ul>
<li class="chapter" data-level="5.1" data-path="web-scraping-interactive-graphics-shiny-apps-package-building-and-more.html"><a href="web-scraping-interactive-graphics-shiny-apps-package-building-and-more.html#packages"><i class="fa fa-check"></i><b>5.1</b> Packages</a></li>
<li class="chapter" data-level="5.2" data-path="web-scraping-interactive-graphics-shiny-apps-package-building-and-more.html"><a href="web-scraping-interactive-graphics-shiny-apps-package-building-and-more.html#collecting-data"><i class="fa fa-check"></i><b>5.2</b> Collecting data</a></li>
<li class="chapter" data-level="5.3" data-path="web-scraping-interactive-graphics-shiny-apps-package-building-and-more.html"><a href="web-scraping-interactive-graphics-shiny-apps-package-building-and-more.html#alternative-graphics"><i class="fa fa-check"></i><b>5.3</b> Alternative graphics</a></li>
<li class="chapter" data-level="5.4" data-path="web-scraping-interactive-graphics-shiny-apps-package-building-and-more.html"><a href="web-scraping-interactive-graphics-shiny-apps-package-building-and-more.html#shiny-web-applications"><i class="fa fa-check"></i><b>5.4</b> Shiny Web Applications</a></li>
<li class="chapter" data-level="5.5" data-path="web-scraping-interactive-graphics-shiny-apps-package-building-and-more.html"><a href="web-scraping-interactive-graphics-shiny-apps-package-building-and-more.html#rmarkdown-html-notebooks-and-ipythonjupyter-notebooks"><i class="fa fa-check"></i><b>5.5</b> Rmarkdown HTML notebooks and Ipython/Jupyter notebooks</a></li>
<li class="chapter" data-level="5.6" data-path="web-scraping-interactive-graphics-shiny-apps-package-building-and-more.html"><a href="web-scraping-interactive-graphics-shiny-apps-package-building-and-more.html#exercise-housing-in-new-york-city"><i class="fa fa-check"></i><b>5.6</b> Exercise: Housing in New York City</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="further-reading.html"><a href="further-reading.html"><i class="fa fa-check"></i>Further reading</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Lancaster University MATH550/SCC.461 R Programming</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction-to-r" class="section level1 unnumbered">
<h1><strong>0</strong> Introduction to R</h1>
<p>The purpose of this lab is to provide you with a gentle introduction to R as an environment for working with and analysing data. In this lab, you will practice using some of the basic functions and operations in R, as well as how to create functions of your own.</p>
<div id="background" class="section level2">
<h2><span class="header-section-number">0.1</span> Background</h2>
<p>R is a free and open-source programming language for statistical computing
and graphics. `Open-source’ means that the code that was written to create the R
environment is available for others to use and modify from its original design.
Open-source software is typically thought of as a collaborative effort where
people improve upon the source code and share the changes within the
community so that other members can take advantage of their work, as well as
help improve it further.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>
<img src="week0/Mozilla_Firefox.png" width="0.2\linewidth" /></p>
<p>Versions of R are available for Windows, Macs and Linux. To download and
install R visit the website <a href="http://www.r-project.org" class="uri">http://www.r-project.org</a>. You will also
need RStudio (<a href="http://www.rstudio.com" class="uri">http://www.rstudio.com</a>). If you are using one of the
computers in the lab, both of these will already be installed.</p>
One way in which someone may improve upon R is by trying to add functionality
to it, like, making it possible to produce a particular graph
or fit a particular kind of model.
<div class="figure"><span id="fig:unnamed-chunk-2"></span>
<img src="week0/corrgram.png" alt="Correlograms help us visualise correlation matrices and are implemented in the `corrgram` package." width="\marginparwidth" />
<p class="caption">
Figure 0.1: Correlograms help us visualise correlation matrices and are implemented in the <code>corrgram</code> package.
</p>
</div>
<p>Once someone has implemented a particular feature, they typically bundle it up into a <em>package</em> and request it to be stored on <a href="https://cran.r-project.org/">CRAN (the Comprehensive R Archive Network)</a>. This makes it incredibly easy for users to download and install other people’s packages which is something we will initially be doing a lot of.</p>
<p>Installing packages and using other people’s code in order to get a piece of
software to do what you want might seem a bit odd at first. But, actually, this
modular nature is common in lots of software; Excel has its add-ins,
SAS has extra procedures which are bundled into products, and SPSS has
modules. An entire open-source operating system, Linux, has been built
using this modular approach, again developed by a passionate
community.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>
<img src="week0/Tux.png" width="0.5\linewidth" /></p>
</div>
<div id="saving-your-work" class="section level2">
<h2><span class="header-section-number">0.2</span> Saving your work</h2>
<p>If you are using a university computer or are remotely connected to your
virtual machine, start by finding your home folder (your H: drive). This H:
drive will be made accessible to you no matter which university computer you
use. Access it via <em>Start button &gt; Computer</em>.
This is the best location to save all your files (reports, scripts, plots,
data sets, and everything else).</p>
<p>If using a university computer, <strong>do NOT save files to the local (C:) drive</strong>
as they will probably not be there when you next login.</p>
<p>Also, ISS makes backups of your H: drive (I think they do this every night), so
if you ever permanently delete a file, they should be able to recover
a previous version of it.</p>
</div>
<div id="getting-started" class="section level2">
<h2><span class="header-section-number">0.3</span> Getting started</h2>
<p>Start by opening R Studio. R Studio tries to makes best use of the screen by
splitting it up in to three panels:</p>
<p><img src="week0/rstudio-annotated.png" /></p>
<ul>
<li>An interactive R <strong>console</strong> – enter R commands manually at the prompt at the bottom (look for the <code>&gt;</code> symbol).</li>
<li>Environment – as you progress through the lab materials, the objects you create will show up here which will include things like
data sets, plots, and models.</li>
<li>Stuff – a miscellaneous panel that has various uses, as you will see later. For now, click on the <strong>Plot</strong> tab. The panel should become blank (since we have not made any plots yet).</li>
</ul>
<div id="using-r-as-an-overgrown-calculator" class="section level3">
<h3><span class="header-section-number">0.3.1</span> Using R as an overgrown calculator</h3>
<p>Everything you do in this section will be using the <strong>console</strong> panel.
Start by entering one of the simplest possible commands you can do in R;
addition of two numbers. Type the following and press <code>Enter</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="dv">4</span> <span class="op">+</span><span class="st"> </span><span class="dv">5</span></a></code></pre></div>
<pre><code>## [1] 9</code></pre>
<p>The result is automatically printed back to the user. R can do all the basic maths
operations. The <code>[1]</code> refers to 9 being the first part of out answer. In this case, 9 is the first and only part to our answer. You will come across answers later which have many parts, and so R prints these numbers in square brackets to help.</p>
<table>
<caption>Basic maths operations in R.</caption>
<thead>
<tr class="header">
<th>Operation</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Add</td>
<td><code>2 + 3</code></td>
</tr>
<tr class="even">
<td>Subtract</td>
<td><code>2 - 3</code></td>
</tr>
<tr class="odd">
<td>Multiply</td>
<td><code>2*3</code></td>
</tr>
<tr class="even">
<td>Divide</td>
<td><code>2/3</code></td>
</tr>
<tr class="odd">
<td>Modulus</td>
<td><code>2 %% 3</code></td>
</tr>
<tr class="even">
<td>Square root</td>
<td><code>sqrt(2)</code></td>
</tr>
<tr class="odd">
<td>Power</td>
<td><code>2^3</code></td>
</tr>
<tr class="even">
<td>Cosine</td>
<td><code>cos(2*pi)</code></td>
</tr>
<tr class="odd">
<td>Sine</td>
<td><code>sin(pi/2)</code></td>
</tr>
<tr class="even">
<td>Tangent</td>
<td><code>tan(pi/4)</code></td>
</tr>
<tr class="odd">
<td>Natural log</td>
<td><code>log(2)</code></td>
</tr>
<tr class="even">
<td>Expontential</td>
<td><code>exp(2)</code></td>
</tr>
</tbody>
</table>
<p>Using numbers of your own, try the other basic mathematical operations listed below</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="dv">100-45</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="dv">65</span><span class="op">*</span><span class="dv">89</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="dv">45</span><span class="op">/-</span><span class="dv">3</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="dv">100</span> <span class="op">%%</span><span class="st"> </span><span class="dv">9</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="kw">sqrt</span>(<span class="dv">810</span>)</a>
<a class="sourceLine" id="cb3-6" title="6"><span class="dv">2</span><span class="op">^</span><span class="dv">10</span></a></code></pre></div>
<p>Once you’re happy, try stringing some of these calculations all into one
command, for example:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">7</span><span class="op">*</span><span class="dv">5</span><span class="op">/</span><span class="dv">3</span> <span class="op">-</span><span class="st"> </span><span class="dv">2</span></a></code></pre></div>
<pre><code>## [1] 12.66667</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">(<span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">7</span>)<span class="op">*</span><span class="dv">5</span><span class="op">/</span>(<span class="dv">3</span> <span class="op">-</span><span class="st"> </span><span class="dv">2</span>)</a></code></pre></div>
<pre><code>## [1] 50</code></pre>
<p>The multiplication and division calculations are performed first (<code>*</code> and <code>/</code>), followed by addition and subtraction (<code>+</code> and <code>-</code>), going from left to right.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<p>This can be overridden by using putting the calculations we want to perform
first in brackets. A more complex calculation is:
<span class="math display">\[
\frac{\sqrt{3/4}}{\frac{1}{3} - \frac{2}{\pi^2}}.
\]</span></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">sqrt</span>(<span class="dv">3</span><span class="op">/</span><span class="dv">4</span>) <span class="op">/</span><span class="st"> </span>(<span class="dv">1</span><span class="op">/</span><span class="dv">3</span> <span class="op">-</span><span class="st"> </span><span class="dv">2</span><span class="op">/</span>pi<span class="op">^</span><span class="dv">2</span>)</a></code></pre></div>
<pre><code>## [1] 6.626513</code></pre>
<p>This next step is when R stops behaving just like a calculator and starts
becoming more useful. We can store the results of our calculations in an object
using the assignment operator, <code>&lt;-</code> (a less-than symbol followed by a hyphen).
We just need to think of useful names for our objects:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">apple  &lt;-<span class="st"> </span><span class="dv">20</span> <span class="op">-</span><span class="st"> </span><span class="dv">16</span></a>
<a class="sourceLine" id="cb10-2" title="2">banana &lt;-<span class="st"> </span><span class="dv">4</span> <span class="op">+</span><span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb10-3" title="3">apple <span class="op">-</span><span class="st"> </span>banana</a></code></pre></div>
<pre><code>## [1] -5</code></pre>
<p>If you look in the environment panel of RStudio, you should now see two objects
listed. These objects are now part of our working environment. We can access
their contents by typing entering their names into the console:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">apple</a></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">banana</a></code></pre></div>
<pre><code>## [1] 9</code></pre>
<p>When creating objects, remember R is case-sensitive so <code>apple</code> is different
from <code>Apple</code>:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">Apple</a></code></pre></div>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;Apple&#39; not found</code></pre>
<p>And if you decide to assign a new value to an object, R will not hesitate in
overwriting it (R does not issue a warning):</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">apple &lt;-<span class="st"> </span><span class="dv">-100</span></a>
<a class="sourceLine" id="cb18-2" title="2">apple</a></code></pre></div>
<pre><code>## [1] -100</code></pre>
<p>We can increase the value an object contains by referencing itself:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1">apple &lt;-<span class="st"> </span>apple <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb20-2" title="2">apple</a></code></pre></div>
<pre><code>## [1] -99</code></pre>
<p>In fact, all mathematical operations can be applied like this.</p>
</div>
<div id="vectors" class="section level3">
<h3><span class="header-section-number">0.3.2</span> Vectors</h3>
<p>This is where R starts to become useful for data scientists, as it is
optimised to work with vectors of numbers. A vector is like a list of
numbers, or a single column in a spreadsheet. A lot of the mathematical
operations we have already looked at also work on vectors.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">77</span>, <span class="dv">2</span>, <span class="dv">-2</span>, <span class="dv">14</span>)</a>
<a class="sourceLine" id="cb22-2" title="2">y &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb22-3" title="3">x <span class="op">+</span><span class="st"> </span>y</a></code></pre></div>
<pre><code>## [1]  3  4 79  4  0 16</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1">x<span class="op">*</span>y</a></code></pre></div>
<pre><code>## [1]   2   4 154   4  -4  28</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1">x<span class="op">^</span>y</a></code></pre></div>
<pre><code>## [1]    1    4 5929    4    4  196</code></pre>
<p>The <code>c()</code> function allows us to <em>combine</em> (concatenate) numbers together into
a list. And we stored this list inside <code>x</code>. In mathematics, a list
of numbers like this is referred to as a <em>vector</em>. The expression
<code>x + y</code> added 2 to every element in <code>x</code>, likewise <code>x*y</code>
doubled each element. But what happens if <code>y</code> were a vector like
<code>x</code>:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb28-2" title="2"></a>
<a class="sourceLine" id="cb28-3" title="3">x <span class="op">+</span><span class="st"> </span>y</a></code></pre></div>
<pre><code>## [1]  2  3 79  4  1 17</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1">x<span class="op">*</span>y</a></code></pre></div>
<pre><code>## [1]   1   2 154   4  -6  42</code></pre>
<p>You can see that R performs the operations on an elementwise basis.</p>
<p>To check how many elements are in a vector type:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1"><span class="kw">length</span>(x)</a></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1"><span class="kw">length</span>(y)</a></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>In order to add or multiply two vectors they need to be the same length or
one has to be a multiple of the other:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">55</span>, <span class="dv">42</span>, <span class="dv">13</span>, <span class="dv">24</span>)</a>
<a class="sourceLine" id="cb36-2" title="2">x <span class="op">+</span><span class="st"> </span>y</a></code></pre></div>
<pre><code>## Warning in x + y: longer object length is not a multiple of shorter object
## length</code></pre>
<pre><code>## [1] 56 44 90 26 53 56</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" title="1">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">55</span>, <span class="dv">13</span>)</a>
<a class="sourceLine" id="cb39-2" title="2">x <span class="op">+</span><span class="st"> </span>y</a></code></pre></div>
<pre><code>## [1]  56  15 132  15  53  27</code></pre>
<p>The priority of operations is the same for vector arithmetic as it is for
single values:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" title="1"><span class="dv">2</span><span class="op">*</span>x <span class="op">+</span><span class="st"> </span>y</a></code></pre></div>
<pre><code>## [1]  57  17 209  17  51  41</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" title="1"><span class="dv">2</span><span class="op">*</span>(x <span class="op">+</span><span class="st"> </span>y)</a></code></pre></div>
<pre><code>## [1] 112  30 264  30 106  54</code></pre>
<p>If we want to create a quick sequence of numbers then we can take advantage
of the <code>seq()</code> function:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" title="1">x &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from=</span><span class="dv">1</span>, <span class="dt">to=</span><span class="dv">10</span>, <span class="dt">by=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb45-2" title="2">x</a></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" title="1">y &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from=</span><span class="dv">1</span>, <span class="dt">to=</span><span class="dv">10</span>, <span class="dt">by=</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb47-2" title="2">y</a></code></pre></div>
<pre><code>## [1] 1 3 5 7 9</code></pre>
<p>This is our first use of a function with parameters. In order to use
<code>seq()</code>, we need to specify three bits of information; what number
do we start from, what do we go up to, and what size steps do we take.
And we separate these using commas.</p>
<p>A common task in writing R code is creating an integer sequence (like what we
have done for <code>x</code>), as a result R offers us a shortcut using a colon in
the following way:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" title="1">x &lt;-<span class="st"> </span><span class="dv">0</span><span class="op">:</span><span class="dv">15</span></a>
<a class="sourceLine" id="cb49-2" title="2">x</a></code></pre></div>
<pre><code>##  [1]  0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" title="1">y &lt;-<span class="st"> </span><span class="dv">6</span><span class="op">:-</span><span class="dv">6</span></a>
<a class="sourceLine" id="cb51-2" title="2">y</a></code></pre></div>
<pre><code>##  [1]  6  5  4  3  2  1  0 -1 -2 -3 -4 -5 -6</code></pre>
</div>
<div id="basic-plots" class="section level3">
<h3><span class="header-section-number">0.3.3</span> Basic plots</h3>
<p>Using vectors, the operations we have covered and the basic plotting function
in R we can start to look at some interesting things. For example, we can look
at the relationship between acceleration due to Earth’s gravity
and the distance you are from Earth. To calculate the acceleration we use the
following formula:
<span class="math display">\[
a = G\frac{m}{r^2}
\]</span>
where <span class="math inline">\(a\)</span> is acceleration, <span class="math inline">\(G\)</span> the gravitational constant, <span class="math inline">\(m\)</span>
the mass of the Earth, and <span class="math inline">\(r\)</span> the distance between the centre of the Earth
and the centre of you.</p>
<div class="figure"><span id="fig:unnamed-chunk-25"></span>
<img src="week0/earth-human.png" alt="The distance between the centre of Earth and the centre of human is represented by r." width="\linewidth" />
<p class="caption">
Figure 0.2: The distance between the centre of Earth and the centre of human is represented by r.
</p>
</div>
<p>The mass of Earth is approximately <span class="math inline">\(5.97\times10^{24}\)</span> kg. To work out
the acceleration you experience when you’re stood on the surface of Earth,
we set <span class="math inline">\(r\)</span> to be the distance between it’s centre and it’s surface (i.e.
it’s radius). This is approximately <span class="math inline">\(6.37\times10^6\)</span> m. Finally, <span class="math inline">\(G\)</span> takes the
value <span class="math inline">\(6.67\times10^{-11}\)</span>. So to calculate <span class="math inline">\(a\)</span> at the surface of Earth enter:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" title="1">G &lt;-<span class="st"> </span><span class="fl">6.6728</span><span class="op">*</span><span class="dv">10</span><span class="op">^-</span><span class="dv">11</span></a>
<a class="sourceLine" id="cb53-2" title="2">r_earth &lt;-<span class="st"> </span><span class="fl">6.371</span><span class="op">*</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span></a>
<a class="sourceLine" id="cb53-3" title="3">m &lt;-<span class="st"> </span><span class="fl">5.9736</span><span class="op">*</span><span class="dv">10</span><span class="op">^</span><span class="dv">24</span></a>
<a class="sourceLine" id="cb53-4" title="4">    </a>
<a class="sourceLine" id="cb53-5" title="5">r &lt;-<span class="st"> </span>r_earth</a>
<a class="sourceLine" id="cb53-6" title="6">a &lt;-<span class="st"> </span>G<span class="op">*</span>m<span class="op">/</span>r<span class="op">^</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb53-7" title="7">a</a></code></pre></div>
<pre><code>## [1] 9.820397</code></pre>
<p>This means that if you jump up in the air, once you begin to fall, you will be accelerating towards the ground at 9.82 metres per
second.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a></p>
<p>We fall very quickly. So, how does this effect change as we move further away from Earth? To answer this, we should make a plot. We will make a plot that shows the effect of gravity on the Earth’s surface (0m) all the way up the orbit height of GPS satellites (20,350km):</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" title="1">dist &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from=</span><span class="dv">0</span>, <span class="dt">to=</span><span class="dv">20350</span><span class="op">*</span><span class="dv">1000</span>, <span class="dt">by=</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb55-2" title="2">r &lt;-<span class="st"> </span>r_earth <span class="op">+</span><span class="st"> </span>dist</a>
<a class="sourceLine" id="cb55-3" title="3">a &lt;-<span class="st"> </span>G<span class="op">*</span>m<span class="op">/</span>r<span class="op">^</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb55-4" title="4">dist_km &lt;-<span class="st"> </span>dist <span class="op">/</span><span class="st"> </span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb55-5" title="5"><span class="kw">plot</span>(<span class="dt">x=</span>dist_km, <span class="dt">y=</span>a, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-27-1.png" width="672" />
The shape you see represents the decreasing effect of gravity the further
we get from Earth, and is more generally known as the <em>inverse-square law</em>.
This pattern appears a lot in nature; the intensity of the heat you feel from
a burning fire and how close you are to it follows an inverse-square law, as
does how bright it appears to you.</p>
<p>We set three parameters when using the <code>plot()</code> function; we set the
distance in kilometres from the Earth’s surface to be on the x-axis
(<code>x=dist_km</code>), and the acceleration due to gravity on the y-axis
(<code>y=a</code>). The <code>type="l"</code> option (<code>l</code> stands for line) and
specifies that we want to plot a line, if you remove this parameter, R will
plot points instead. This is because the default value for <code>type</code> is <code>"p"</code> which
is short for <em>points</em>. In a future lab, we look at how to change
axis labels, tic marks, add a title, line colour and so on, as well as how to
export plots.</p>
</div>
<div id="summary" class="section level3">
<h3><span class="header-section-number">0.3.4</span> Summary</h3>
<ul>
<li>There is a priority of operations in arithmetic statements in R:
raising to a power (<code>^</code>), multiplication and division (<code>*</code>
and <code>/</code>), addition and subtraction (<code>+</code> and <code>-</code>).
Operations are performed left to right, and priorities are overridden by
parentheses.</li>
</ul>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" title="1"><span class="dv">6</span><span class="op">*</span>(<span class="dv">5</span><span class="op">+</span><span class="dv">2</span>)<span class="op">^</span><span class="dv">2</span><span class="op">/</span>(<span class="dv">2</span><span class="op">+</span><span class="dv">6-9</span>)<span class="op">/</span><span class="dv">7</span><span class="op">*</span><span class="dv">2</span></a></code></pre></div>
<pre><code>## [1] -84</code></pre>
<ul>
<li>Results can be stored in objects using the assignment statement:
<code>&lt;-</code>. Object names are case sensitive. Type the name into the
console and R will print the contents.</li>
</ul>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" title="1">x &lt;-<span class="st"> </span><span class="dv">0</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb58-2" title="2">y &lt;-<span class="st"> </span>x<span class="op">^</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb58-3" title="3">y</a></code></pre></div>
<pre><code>##  [1]   0   1   4   9  16  25  36  49  64  81 100</code></pre>
<ul>
<li>Vectors are ordered lists of numbers. To create vectors we use,
<code>c()</code>, the combine function. Arithmetic operations work on vectors
with the same priorities as single numbers. Use <code>seq()</code> to create a
vector containing a specific number sequence, the parameters; <code>by</code>
and <code>length.out</code> can be used to control the sequence.</li>
</ul>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" title="1">days_long &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>)</a>
<a class="sourceLine" id="cb60-2" title="2">days_quick &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">7</span></a>
<a class="sourceLine" id="cb60-3" title="3">half_days &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">7</span>, <span class="dt">by=</span><span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb60-4" title="4">days_long <span class="op">+</span><span class="st"> </span><span class="fl">0.5</span></a></code></pre></div>
<pre><code>## [1] 1.5 2.5 3.5 4.5 5.5 6.5 7.5</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" title="1"><span class="dv">2</span><span class="op">*</span>half_days</a></code></pre></div>
<pre><code>##  [1]  2  3  4  5  6  7  8  9 10 11 12 13 14</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" title="1"><span class="kw">c</span>(days_long, days_quick)</a></code></pre></div>
<pre><code>##  [1] 1 2 3 4 5 6 7 1 2 3 4 5 6 7</code></pre>
<ul>
<li>The <code>plot()</code> function produces a plot of <span class="math inline">\(x\)</span>-<span class="math inline">\(y\)</span> points using
two vectors. Whether points are used or a line is draw is determined by
the <code>type</code> parameter (<code>type="l"</code> for lines, or
<code>type="p"</code> for points). The <code>points()</code> function has the same
parameters as <code>plot()</code> but will add it’s data to an existing plot,
rather than create a new one.</li>
</ul>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" title="1">r &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb66-2" title="2">g &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">/</span>r<span class="op">^</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb66-3" title="3"><span class="kw">plot</span>(<span class="dt">x=</span>r, <span class="dt">y=</span>g, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>, <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)</a>
<a class="sourceLine" id="cb66-4" title="4">h &lt;-<span class="st"> </span>g<span class="op">*</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb66-5" title="5"><span class="kw">points</span>(<span class="dt">x=</span>r, <span class="dt">y=</span>h, <span class="dt">type=</span><span class="st">&quot;p&quot;</span>, <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
</div>
<div id="exercises" class="section level3">
<h3><span class="header-section-number">0.3.5</span> Exercises</h3>
<p>The exercises that follow can be carried out using the techniques and functions
you have learned so far. Expect to make some mistakes. But if you start to get
annoyed either take a break or ask for help.</p>
<ol style="list-style-type: decimal">
<li>Evaluate the following expressions:
<ol style="list-style-type: lower-alpha">
<li><span class="math inline">\(\frac{49^2 - 542}{42 + 63^2}\)</span></li>
<li><span class="math inline">\(a^2\)</span> for <span class="math inline">\(a = 1, 2, \ldots, 10\)</span></li>
</ol></li>
<li>Create plots for different powers of <span class="math inline">\(x\)</span>:
<ol style="list-style-type: lower-alpha">
<li>Create a vector, <span class="math inline">\(x\)</span>, which goes from -100 up to 100.</li>
<li>Create a new plot showing <span class="math inline">\(y = x^2\)</span>.</li>
<li>Add a red line to the existing plot showing <span class="math inline">\(y = x^4\)</span>.</li>
</ol></li>
</ol>
</div>
</div>
<div id="getting-help" class="section level2">
<h2><span class="header-section-number">0.4</span> Getting Help</h2>
<p>For help concerning a known R function, you can use the <code>help</code> function.
For instance, to get a listing of information about the <code>seq()</code>
function, type the following into the console:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" title="1"><span class="kw">help</span>(plot)</a></code></pre></div>
<p>To get the top-level help page for a package, for example the <code>base</code> package, issue:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" title="1"><span class="kw">help</span>(<span class="dt">package=</span>base)</a></code></pre></div>
<p>Help pages are all formatted to have the same sections, the most useful
of which are the first three; Decription, Usage and Arguments. These will
help remind you how a function works, and what its arguments are.</p>
<p>There is a shortcut to loading a help page, simply prefix the name of the
function with a question mark:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" title="1">?plot</a></code></pre></div>
<p>For broader help regarding statistical programming in R look in the library for
books such as:</p>
<ul>
<li>Dalgaard, P. (2000). Introductory Statistics with R.</li>
<li>Venables W.N. and Ripley B. D. (1999). Modern Applied Statistics with S-Plus.</li>
</ul>
<p>Compared to these lab notes, these books offer an alternative explanation
regarding how to use R.</p>
<div id="ask-questions" class="section level3">
<h3><span class="header-section-number">0.4.1</span> Ask questions</h3>
<p>Beyond searching the Internet, you can ask specific questions at
www.stackoverflow.com, a searchable forum of questions and answers about all
aspects of computer programming. StackOverflow has answered (and archived) thousands of questions related to R programming. So, it is likely that someone else has
already asked your question and also got an answer. Use this to your advantage. You can see the latest questions tagged for R at <a href="https://stackoverflow.com/questions/tagged/r" class="uri">https://stackoverflow.com/questions/tagged/r</a> .</p>
<p>Additionally, you can restrict a Google search to StackOverflow by appending
<code>site:stackoverflow.com</code> to the end of your Google search.</p>
<p>However, if you a have question that is more about statistical methodology
than programming, there are also R users who are active on the the
Cross Validated Q&amp;A website, a sister site to StackOverflow.</p>
</div>
<div id="keep-up-to-date-with-the-r-community" class="section level3">
<h3><span class="header-section-number">0.4.2</span> Keep up-to-date with the R community</h3>
<p>Read R-bloggers (www.r-bloggers.com), a blog aggregator that reposts R
related articles from across the web. R bloggers is a good place to stumble
across R tutorials, announcements, and example data analyses.
Though other people’s code may not always be the best.</p>
</div>
</div>
<div id="r-scripts" class="section level2">
<h2><span class="header-section-number">0.5</span> R scripts</h2>
<p>Some of you may start to be feeling at least slightly frustrated having to type
commands line by line in to the console panel. Particularly, if you are like me
and you often make mistakes, meaning that you have to re-enter the whole line.
For example, with the moose-wolf data, if we entered one value incorrectly
then the whole plot would be invalid. And once the mistake has been corrected,
all of the subsequent commands to draw the plot would have to be re-entered.</p>
<p>Fortunately, like all programming languages, R allows us to maintain a
list of commands in a file we refer to as an <em>R script</em>. This script can
then be edited (correcting our mistakes) as well as processing it either as a
whole or line-by-line. The main advantage of this is that we can save and close
a script, switch off our computers and go home, with the intention of carrying
on tomorrow (maybe).</p>
<div id="creating-and-saving-an-r-script" class="section level3">
<h3><span class="header-section-number">0.5.1</span> Creating and saving an R script</h3>
<p>Let us put the commands we used for calculating acceleration due to Earth’s
gravity into an R script. To do this in RStudio, go to
<em>File &gt; New &gt; Script</em>. This will have created a Script panel, resizing the  window to be smaller. The Script panel has some useful features that will be discussed in more detail, but the nicest one is that as we type out commands in the script, they will be
colour-coded, making it easier to read.</p>
<p>One-by-one, type the commands used for the gravity calculations into the
script panel. Your script should look like this (but with colour):</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" title="1">G &lt;-<span class="st"> </span><span class="fl">6.6728</span><span class="op">*</span><span class="dv">10</span><span class="op">^-</span><span class="dv">11</span></a>
<a class="sourceLine" id="cb70-2" title="2">r_earth &lt;-<span class="st"> </span><span class="fl">6.371</span><span class="op">*</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span></a>
<a class="sourceLine" id="cb70-3" title="3">m &lt;-<span class="st"> </span><span class="fl">5.9736</span><span class="op">*</span><span class="dv">10</span><span class="op">^</span><span class="dv">24</span></a>
<a class="sourceLine" id="cb70-4" title="4">dist &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from=</span><span class="dv">0</span>, <span class="dt">to=</span><span class="dv">20350</span><span class="op">*</span><span class="dv">1000</span>, <span class="dt">by=</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb70-5" title="5">r &lt;-<span class="st"> </span>r_earth <span class="op">+</span><span class="st"> </span>dist</a>
<a class="sourceLine" id="cb70-6" title="6">a &lt;-<span class="st"> </span>G<span class="op">*</span>m<span class="op">/</span>r<span class="op">^</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb70-7" title="7">dist_km &lt;-<span class="st"> </span>dist <span class="op">/</span><span class="st"> </span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb70-8" title="8"><span class="kw">plot</span>(<span class="dt">x=</span>dist_km, <span class="dt">y=</span>a, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>)</a></code></pre></div>
<p>In the script panel, all of the usual text editing tools are available;
cut, copy, paste, highlight and delete. If you want to split a command
over more than one line, then just break it after a comma, or where it is
obviously not complete.</p>
<p>For example, as far as R is concerned, these two ways
of creating the <code>dist</code> object are exactly the same:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" title="1">dist &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from=</span><span class="dv">0</span>, <span class="dt">to=</span><span class="dv">20350</span><span class="op">*</span><span class="dv">1000</span>, <span class="dt">by=</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb71-2" title="2"></a>
<a class="sourceLine" id="cb71-3" title="3">dist &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from=</span><span class="dv">0</span>, <span class="dt">to=</span><span class="dv">20350</span><span class="op">*</span><span class="dv">1000</span>, </a>
<a class="sourceLine" id="cb71-4" title="4">			<span class="dt">by=</span><span class="dv">10</span>)</a></code></pre></div>
<p>We can also break calculations over multiple lines, as long as it is obvious
that we plan on entering more code, such as ending a line with a plus:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" title="1"><span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">4</span> <span class="op">+</span><span class="st"> </span><span class="dv">5</span> <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb72-2" title="2">	<span class="dv">6</span> <span class="op">+</span><span class="st"> </span><span class="dv">7</span> <span class="op">+</span><span class="st"> </span><span class="dv">8</span></a></code></pre></div>
<pre><code>## [1] 36</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" title="1"><span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">4</span> <span class="op">+</span><span class="st"> </span><span class="dv">5</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span> <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb74-2" title="2">	<span class="dv">7</span> <span class="op">+</span><span class="st"> </span><span class="dv">8</span></a></code></pre></div>
<pre><code>## [1] 36</code></pre>
<p>When we enter commands into an R script, these are not being processed by R. It
is good to think of writing in a script as a way of <em>preparing</em> commands
for R. Note that, even with a script open, you are still free to type directly
into the console. To do so, simply click into the console panel and start
typing. Click on the script to carry on writing there.</p>
<p>A good habit when writing scripts is to save frequently. Go to
<em>File &gt; Save</em> and save the script as <code>Lab0-Gravity.R</code>, somewhere
 where you will be able to find it again. You may want to create
a folder called <code>R-Programming</code> and save the script in there. If you
double click a file with the <code>.R</code> extension, RStudio will automatically
try to open it, just like how Word is used to open <code>doc' and</code>docx’ files.</p>
</div>
<div id="running-an-r-script" class="section level3">
<h3><span class="header-section-number">0.5.2</span> Running an R script</h3>
<p>Given that you have typed out and saved the gravity commands, we are now ready
to let RStudio run it! To do this highlight all the lines in your script and
then click on the run button:
<img src="week0/rstudio-highlight-run.png" width="\linewidth" /></p>
<p>By using the highlight-and-run technique we can highlight just small
parts of our script that we want to re-run. Also, using the keyboard shortcut
<code>Ctrl + Enter</code> (or <code>Ctrl + R</code>) means you do not have to click the run button. And if no
code is highlighted, then it will simply send the current line to the console.</p>
<p>Another way to run scripts is by <em>sourcing</em> them. To do this you need
to know the full path of where the R script is stored, as well as the name of
the script. For example, say, I store my gravity script in the following location:
<code>H:\My Awesome R Scripts\Lab0-Gravity.R</code>. Then in order to source it I would enter into the console the following command:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" title="1"><span class="kw">source</span>(<span class="st">&quot;H:/My Awesome R Scripts/Lab0-Gravity.R&quot;</span>)</a></code></pre></div>
<p>There are two things you must remember; (i) on Windows the backslashes in filepaths must be entered in R as either double backslashes or as forward slashes, and
(ii) put the complete file name in quotes. If you have got the path or file name
wrong, R will tell you that it cannot find the file.</p>
<p>Secondly, if there is something wrong with your code when sourcing, it is
likely that R will give you a useful error message, at least making
it obvious where the error occurred. But finding what is actually
causing the error is 10% of the battle, fixing it is the other 90%.</p>
<p>Thirdly we may run R in what is known as batch mode. To do this on Unix/Linux or Mac OS we submit the following command in the Terminal (replacing the spaces in the filename with <code>-</code>),
assuming your Terminal is in the same directory as your R script.</p>
<pre><code>R CMD BATCH Lab0-Gravity.R</code></pre>
<p>or with the command,</p>
<pre><code>R --vanilla &lt; Lab0-Gravity.R &gt; Lab0-Gravity.Rout</code></pre>
<p>The complication for Windows users is you have to point to the exact filepath of the R.exe executable.So the Windows Command Prompt command is for example as follows:</p>
<pre><code>&quot;C:\Program Files\R\R-3.3.0\bin\x64\R&quot; CMD BATCH Lab0-Gravity.R</code></pre>
<p>These ways of calling R will generate a text file of output called <code>Lab0-Gravity.Rout</code>.
On some systems you can run R using the <code>Rscript</code> command:</p>
<pre><code>Rscript Lab0-Gravity.R</code></pre>
</div>
<div id="dealing-with-errors" class="section level3">
<h3><span class="header-section-number">0.5.3</span> Dealing with errors</h3>
<p>Let us imagine that you have been coding for five days straight on a project
(this will happen at some point during the MSc). Your R code is scattered across
three or four scripts. Seldom will they run properly at first (this is the case
even for experts). So, one activity you have to become familiar with (and
hopefully good at) is tracking down and fixing these mistakes.</p>
In software development, mistakes like these are called bugs,
and the time spent trying to remove them, is time spent
debugging.
<div class="figure"><span id="fig:unnamed-chunk-40"></span>
<img src="week0/cross-stitch.jpg" alt="Debugging feels both tedious and satisfying, much like cross stitching (image by Rachel Mckay on Flickr)" width="\linewidth" />
<p class="caption">
Figure 0.3: Debugging feels both tedious and satisfying, much like cross stitching (image by Rachel Mckay on Flickr)
</p>
</div>
</div>
<div id="adding-comments-to-your-script" class="section level3">
<h3><span class="header-section-number">0.5.4</span> Adding comments to your script</h3>
<p>The best programming habit you could ever develop is putting verbose
comments in your code.</p>
<p>Any line in your script that begins with <code>#</code> will be ignored by R.
Similarly if you use a <code>#</code> in the middle of a line, the remainder of
that line will ignored.
By using <code>#</code> we are able to add comments to our commands, and even
comment-out our code. Type out the following script for calculating
gravity, include the comments. Once you have typed out the script be sure
to save it, as we will be modifying it soon.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" title="1"><span class="co"># Look at the relationship between acceleration due to</span></a>
<a class="sourceLine" id="cb81-2" title="2"><span class="co"># gravity and distance from the Earth&#39;s surface.</span></a>
<a class="sourceLine" id="cb81-3" title="3"></a>
<a class="sourceLine" id="cb81-4" title="4"><span class="co"># ref: http://en.wikipedia.org/wiki/Gravity_of_Earth</span></a>
<a class="sourceLine" id="cb81-5" title="5"></a>
<a class="sourceLine" id="cb81-6" title="6"><span class="co"># Constants ----</span></a>
<a class="sourceLine" id="cb81-7" title="7"></a>
<a class="sourceLine" id="cb81-8" title="8"><span class="co"># Gravitational constant (m^3 kg^-1 s^-2)</span></a>
<a class="sourceLine" id="cb81-9" title="9">G &lt;-<span class="st"> </span><span class="fl">6.6728</span><span class="op">*</span><span class="dv">10</span><span class="op">^-</span><span class="dv">11</span></a>
<a class="sourceLine" id="cb81-10" title="10"></a>
<a class="sourceLine" id="cb81-11" title="11"><span class="co"># Approximate average radius of the Earth (m)</span></a>
<a class="sourceLine" id="cb81-12" title="12">r_earth &lt;-<span class="st"> </span><span class="fl">6.371</span><span class="op">*</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span></a>
<a class="sourceLine" id="cb81-13" title="13"></a>
<a class="sourceLine" id="cb81-14" title="14"><span class="co"># Approximate mass of the Earth (kg)</span></a>
<a class="sourceLine" id="cb81-15" title="15">m &lt;-<span class="st"> </span><span class="fl">5.9736</span><span class="op">*</span><span class="dv">10</span><span class="op">^</span><span class="dv">24</span></a>
<a class="sourceLine" id="cb81-16" title="16"></a>
<a class="sourceLine" id="cb81-17" title="17"><span class="co"># Generate distance vector from Earth&#39;s surface (0m)</span></a>
<a class="sourceLine" id="cb81-18" title="18"><span class="co"># up to the orbit height of GPS satelites (20,350 km)</span></a>
<a class="sourceLine" id="cb81-19" title="19"><span class="co"># at 1km intervals</span></a>
<a class="sourceLine" id="cb81-20" title="20">dist &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from=</span><span class="dv">0</span>, <span class="dt">to=</span><span class="dv">20350</span><span class="op">*</span><span class="dv">1000</span>, <span class="dt">by=</span><span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb81-21" title="21"></a>
<a class="sourceLine" id="cb81-22" title="22"><span class="co"># We measure from the centre of the Earth to the centre of</span></a>
<a class="sourceLine" id="cb81-23" title="23"><span class="co"># the other object:</span></a>
<a class="sourceLine" id="cb81-24" title="24">r &lt;-<span class="st"> </span>r_earth <span class="op">+</span><span class="st"> </span>dist</a>
<a class="sourceLine" id="cb81-25" title="25"></a>
<a class="sourceLine" id="cb81-26" title="26"><span class="co"># Earth&#39;s gravitational acceleration based on distance</span></a>
<a class="sourceLine" id="cb81-27" title="27">a &lt;-<span class="st"> </span>G<span class="op">*</span>m<span class="op">/</span>r<span class="op">^</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb81-28" title="28"></a>
<a class="sourceLine" id="cb81-29" title="29"><span class="co"># Produce the plot ----</span></a>
<a class="sourceLine" id="cb81-30" title="30"><span class="co"># Set distance to km instead of m for x-axis labels</span></a>
<a class="sourceLine" id="cb81-31" title="31">dist_km &lt;-<span class="st"> </span>dist <span class="op">/</span><span class="st"> </span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb81-32" title="32"></a>
<a class="sourceLine" id="cb81-33" title="33"><span class="kw">plot</span>(<span class="dt">x=</span>dist_km, <span class="dt">y=</span>a, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>)</a></code></pre></div>
</div>
<div id="summary-1" class="section level3">
<h3><span class="header-section-number">0.5.5</span> Summary</h3>
<ul>
<li><p>An R script is a prepared list of R commands that are processed
sequentially by R from top to bottom. Using the script editor
in RStudio, scripts can be written, edited, saved, and ran.</p></li>
<li><p>To create a new script go to <em>File &gt; New &gt; R Script</em>. To
open an existing scrip, <em>File &gt; Open…</em>. If you have more than one
script open, RStudio will create tabs across the top of the script panel.</p></li>
<li><p>R scripts have the file extension <code>.R</code>, make sure you include this
when saving your script for the first time.</p></li>
<li><p>Running an R script means sending the contents of the script
to the console. Portions of the script can be sent by highlighting the
relevant code and click the <code>Run</code> button or using the shortcut
<code>Ctrl + Enter</code>.</p></li>
<li><p>Scripts will often contain bugs. Bugs are usually caused by a missing
common or bracket, or from an incorrect object name. In order to track
down bugs, trying running your script one section at a time. Followed by
one line at a time, when you have found the offending section.</p></li>
<li><p>By starting a line with <code>#</code> we are able to add comments to our code,
as R will ignore any text to the right of this symbol.
Adding comments, to break-up your code into sections as well as explain the
purpose of each section, is crucial for future you to understand the purpose
of your script, what it is trying to achieve, and what features are still yet
to be added.</p></li>
</ul>
</div>
<div id="exercise" class="section level3">
<h3><span class="header-section-number">0.5.6</span> Exercise</h3>
<p>Edit your gravity script so that the gravity plot extends up to the
orbit height of geostationary weather satellites (35,880 km from
Earth). Source the script to reproduce the plot.</p>
<div class="figure"><span id="fig:unnamed-chunk-42"></span>
<img src="week0/GOES-K-prelaunch.jpg" alt="GOES 10, was an American weather satellite. Launched in 1997, part of its mission was to assist with hurricane predictions in North America; it was retired and manoeuvred to a graveyard orbit in 2009, (Image by NASA)" width="\linewidth" />
<p class="caption">
Figure 0.4: GOES 10, was an American weather satellite. Launched in 1997, part of its mission was to assist with hurricane predictions in North America; it was retired and manoeuvred to a graveyard orbit in 2009, (Image by NASA)
</p>
</div>
</div>
</div>
<div id="functions" class="section level2">
<h2><span class="header-section-number">0.6</span> Functions</h2>
<p>Sometimes there are tasks that must be performed again and again. When we notice
a repetitive task occurring, it is a good idea to write a <em>function</em> that
performs this task, and then we repeatedly call that.
For example, we have already covered several functions:</p>
<ul>
<li><code>c(...)</code> Combines objects often into a vector, where <code>...</code> represents the objects or values to be combined.</li>
<li><code>seq(from, to, by)</code> Generates a vector containing a seq of numbers specified by the arguments <code>from</code>, <code>to</code> and <code>by</code>.</li>
<li><code>plot(x, y, type="p")</code> Creates a scatter plot of points using arguments <code>x</code> and <code>y</code> as co-ordinates for the points.</li>
<li><code>source(file)</code> Allows commands to be inputted by the R script specified by the argument <code>file</code>.</li>
<li><code>length(x)</code> Returns the number of elements in the vector <code>x</code></li>
</ul>
<p>Here are some other functions that can be useful when working with vectors:</p>
<ul>
<li><code>sum(x)</code> Returns the total from adding all the elements in <code>x</code> together</li>
<li><code>prod(x)</code> Returns the total from multiplying all the elements in <code>x</code>. Note that <code>prod</code> is short for product which is the mathematical name given to this process.</li>
<li><code>sqrt(x)</code> Returns a vector of the same length of , but each element is the square-root of the corresponding element in <code>x</code>.</li>
<li><code>max(x)</code>, <code>min(x)</code> Returns the maximum and minimum element from a vector, respectively.</li>
</ul>
<p>Try them out:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" title="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb82-2" title="2"><span class="kw">sum</span>(x)</a></code></pre></div>
<pre><code>## [1] 55</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" title="1"><span class="kw">prod</span>(x)</a></code></pre></div>
<pre><code>## [1] 3628800</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" title="1"><span class="kw">min</span>(x)</a></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" title="1"><span class="kw">max</span>(x)</a></code></pre></div>
<pre><code>## [1] 10</code></pre>
<p>For the <code>sqrt(x)</code> command, we were giving a warning saying <code>NaNs</code>
had been produced. NaN is short for “Not a Number” and in this instance
they have occurred because we tried to calculate the square-root of a negative
number (which do not exist). Once an element becomes Not a Number, that status
will persist throughout the rest of our calculations. For example:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" title="1">x &lt;-<span class="st"> </span><span class="dv">-2</span><span class="op">:</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb90-2" title="2">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">-5</span>, <span class="dv">-10</span>)</a>
<a class="sourceLine" id="cb90-3" title="3"><span class="kw">sqrt</span>(x) <span class="op">+</span><span class="st"> </span><span class="kw">sqrt</span>(y)</a></code></pre></div>
<pre><code>## Warning in sqrt(x): NaNs produced</code></pre>
<pre><code>## Warning in sqrt(y): NaNs produced</code></pre>
<pre><code>## [1] NaN NaN   0 NaN NaN</code></pre>
<p>Because <code>sqrt(x)</code> and <code>sqrt(y)</code> produced <code>NaN</code>s that
were in different places, this resulted in us producing four <code>NaN</code>s
when adding the two square-rooted vectors together.</p>
<div id="creating-new-functions" class="section level3">
<h3><span class="header-section-number">0.6.1</span> Creating New Functions</h3>
<p>R, just like nearly all programming languages, allows you to create your own
functions. This is great timer saver when you are repeatedly doing the same
task or calculation but on different data sets. And writing your own functions
is definitely a habit you should develop.</p>
<p>In order to explain how to build your own R function. We will revisit
the equation for calculating gravity which stated that
the acceleration, <span class="math inline">\(a\)</span>, due to gravity is
dependent on the mass of the Earth, <span class="math inline">\(m\)</span>, and how far we are from it’s centre
<span class="math inline">\(r\)</span> in metres:
<span class="math display">\[
a = G\frac{m}{r^2}. 
\]</span>
The following code creates a function called <code>calc_gravity</code>,
add it to a new R script:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" title="1">calc_gravity &lt;-<span class="st"> </span><span class="cf">function</span>(distance) {</a>
<a class="sourceLine" id="cb94-2" title="2">	<span class="co"># constants</span></a>
<a class="sourceLine" id="cb94-3" title="3">	G &lt;-<span class="st"> </span><span class="fl">6.6728</span><span class="op">*</span><span class="dv">10</span><span class="op">^-</span><span class="dv">11</span></a>
<a class="sourceLine" id="cb94-4" title="4">	r_earth &lt;-<span class="st"> </span><span class="fl">6.371</span><span class="op">*</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span></a>
<a class="sourceLine" id="cb94-5" title="5">	m &lt;-<span class="st"> </span><span class="fl">5.9736</span><span class="op">*</span><span class="dv">10</span><span class="op">^</span><span class="dv">24</span></a>
<a class="sourceLine" id="cb94-6" title="6">    </a>
<a class="sourceLine" id="cb94-7" title="7">	<span class="co"># calculation</span></a>
<a class="sourceLine" id="cb94-8" title="8">	r &lt;-<span class="st"> </span>r_earth <span class="op">+</span><span class="st"> </span>distance</a>
<a class="sourceLine" id="cb94-9" title="9">	a &lt;-<span class="st"> </span>G<span class="op">*</span>m<span class="op">/</span>r<span class="op">^</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb94-10" title="10">   </a>
<a class="sourceLine" id="cb94-11" title="11">	<span class="kw">return</span>(a)</a>
<a class="sourceLine" id="cb94-12" title="12">}</a></code></pre></div>
<p>Now run the code. You will see nothing really happened. However, what actually
happened is that a new function got added to our environment. Check the
Environment panel, or use <code>ls()</code> in the console to
list the contents of the environment. You should see that our new
function is present. To check that it works try:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" title="1"><span class="kw">calc_gravity</span>(<span class="dt">dist=</span><span class="dv">0</span>)</a></code></pre></div>
<pre><code>## [1] 9.820397</code></pre>
<p>This matches our earlier calculations (9.82), so we can trust that we have
implemented it correctly.</p>
<p>Before we continue, there are a few things that need to be explained about
creating a new function. The first statement we make is we define that the
object <code>calc_gravity()</code> will actually be a function. A function
which has one argument, <code>distance</code>. The name of the function and the
arguments are just names that I chose, you may want to consider others that
are shorter or easier for you to remember. There are a few guidelines
when naming functions:</p>
<ul>
<li>Names should be lowercase.</li>
<li>Use an underscore, <code>_</code>, to separate words within a name.</li>
<li>Generally, function names should use verbs, as functions  things.</li>
<li>Strive for names that are concise and meaningful (this is not easy!).</li>
<li>Avoid existing function names in R, such as <code>length()</code>.</li>
</ul>
<p>If you stick to these guidelines, then your coding-life just got a lot
easier. This is mainly because it is easier for you to remember and guess
what you have called your functions.<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></p>
<p>The code used to calculate gravity then sits between two
curly-brackets.
The <code>return(a)</code> statement then defines the output of the function,
and should also be the last command inside your function. In
this case, we simply return a single value we calculated. But for more complex
functions, it could be a vector, a plot or a model.</p>
<p>When creating your own functions there are two important things to remember
regarding how R stores and interprets them:</p>
<ul>
<li>The objects used inside a function are local to that function. This means that they exist only inside your function, so you do not need to worry if objects exist with the same name. And the values of them are not available outside of the function, hence why we pass everything we want to keep to <code>return()</code> at the end. Think of your function as a guarded sandbox, where no child leaves unless you specifically tell them to.</li>
<li>Although we can see our function in the , the new function is not permanent. It will disappear when we exit RStudio. This is why we store our functions in scripts, so we can source them at the start of session to get back what we need.</li>
</ul>
</div>
<div id="default-values-for-function-arguments" class="section level3">
<h3><span class="header-section-number">0.6.2</span> Default values for function arguments</h3>
<p>Say, we want to calculate the gravity for the other planets. To
do this we would modify our <code>calc_gravity()</code> function, so that it
includes arguments for mass and radius of a planet. Right now, it
assumes we are only interested in Earth. Make the following modifications
in your script:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" title="1">calc_gravity &lt;-<span class="st"> </span><span class="cf">function</span>(distance, mass, radius) {</a>
<a class="sourceLine" id="cb97-2" title="2">	<span class="co"># constant</span></a>
<a class="sourceLine" id="cb97-3" title="3">	G &lt;-<span class="st"> </span><span class="fl">6.6728</span><span class="op">*</span><span class="dv">10</span><span class="op">^-</span><span class="dv">11</span></a>
<a class="sourceLine" id="cb97-4" title="4">    </a>
<a class="sourceLine" id="cb97-5" title="5">	<span class="co"># calculation</span></a>
<a class="sourceLine" id="cb97-6" title="6">	r &lt;-<span class="st"> </span>radius <span class="op">+</span><span class="st"> </span>distance</a>
<a class="sourceLine" id="cb97-7" title="7">	a &lt;-<span class="st"> </span>G<span class="op">*</span>mass<span class="op">/</span>r<span class="op">^</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb97-8" title="8">    </a>
<a class="sourceLine" id="cb97-9" title="9">	<span class="kw">return</span>(a)</a>
<a class="sourceLine" id="cb97-10" title="10">}</a></code></pre></div>
<p>In order to update <code>calc_gravity()</code> so that it includes these
additional arguments you will need to run the above code. This means that
simply passing the distance will no longer work:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" title="1"><span class="kw">calc_gravity</span>(<span class="dt">distance=</span><span class="dv">0</span>)</a></code></pre></div>
<pre><code>## Error in calc_gravity(distance = 0): argument &quot;radius&quot; is missing, with no default</code></pre>
<p>We know have to include mass and radius:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" title="1"><span class="kw">calc_gravity</span>(<span class="dt">distance=</span><span class="dv">0</span>, <span class="dt">mass=</span><span class="fl">5.9736</span><span class="op">*</span><span class="dv">10</span><span class="op">^</span><span class="dv">24</span>, <span class="dt">radius=</span><span class="fl">6.371</span><span class="op">*</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span>)</a></code></pre></div>
<pre><code>## [1] 9.820397</code></pre>
<p>But, say, that 90% of the time when we are doing these calculations they
are in the context of Earth. Then to be more efficient, rather than
continuously have to give the mass and radius of Earth, we could
set the arguments to have these as default values:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" title="1">calc_gravity &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">distance=</span><span class="dv">0</span>, <span class="dt">mass=</span><span class="fl">5.9736</span><span class="op">*</span><span class="dv">10</span><span class="op">^</span><span class="dv">24</span>, <span class="dt">radius=</span><span class="fl">6.371</span><span class="op">*</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span>) {</a>
<a class="sourceLine" id="cb102-2" title="2">	<span class="co"># constant</span></a>
<a class="sourceLine" id="cb102-3" title="3">	G &lt;-<span class="st"> </span><span class="fl">6.6728</span><span class="op">*</span><span class="dv">10</span><span class="op">^-</span><span class="dv">11</span></a>
<a class="sourceLine" id="cb102-4" title="4">    </a>
<a class="sourceLine" id="cb102-5" title="5">	<span class="co"># calculation</span></a>
<a class="sourceLine" id="cb102-6" title="6">	r &lt;-<span class="st"> </span>radius <span class="op">+</span><span class="st"> </span>distance</a>
<a class="sourceLine" id="cb102-7" title="7">	a &lt;-<span class="st"> </span>G<span class="op">*</span>mass<span class="op">/</span>r<span class="op">^</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb102-8" title="8">    </a>
<a class="sourceLine" id="cb102-9" title="9">	<span class="kw">return</span>(a)</a>
<a class="sourceLine" id="cb102-10" title="10">}</a></code></pre></div>
<p>This means that if one simply calls <code>calc_gravity()</code> without
specifying any arguments, the function will assume they are interested in
in the gravity at Earth’s surface.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" title="1"><span class="kw">calc_gravity</span>()</a></code></pre></div>
<pre><code>## [1] 9.820397</code></pre>
<p>But we are free to override these defaults:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" title="1"><span class="co"># On the surface of Saturn</span></a>
<a class="sourceLine" id="cb105-2" title="2"><span class="kw">calc_gravity</span>(<span class="dt">mass=</span><span class="fl">5.683</span><span class="op">*</span><span class="dv">10</span><span class="op">^</span><span class="dv">26</span>, <span class="dt">radius=</span><span class="fl">5.8</span><span class="op">*</span><span class="dv">10</span><span class="op">^</span><span class="dv">7</span>)</a></code></pre></div>
<pre><code>## [1] 11.27275</code></pre>
</div>
<div id="summary-2" class="section level3">
<h3><span class="header-section-number">0.6.3</span> Summary</h3>
<ul>
<li>Functions exist to reduce the amount of repetitive work we do. By
creating our own functions, we write out a task or calculation once and
then can use it many times.</li>
<li>Useful functions for working with vectors include: <code>length()</code>,
<code>sum()</code>, <code>prod()</code>, <code>cumsum()</code>, <code>sqrt()</code>, <code>min()</code>, and <code>max()</code>.</li>
<li>When creating our own functions we also define the names of the functions arguments, their default values (if any), and what the function returns.</li>
</ul>
<p>In your script:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" title="1">say_hello &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">person=</span><span class="st">&quot;World&quot;</span>) {</a>
<a class="sourceLine" id="cb107-2" title="2">	msg &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;Hello,&quot;</span>, person)</a>
<a class="sourceLine" id="cb107-3" title="3">	<span class="kw">return</span>(msg)</a>
<a class="sourceLine" id="cb107-4" title="4">}</a></code></pre></div>
<p>In the console:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" title="1"><span class="kw">say_hello</span>()</a></code></pre></div>
<pre><code>## [1] &quot;Hello, World&quot;</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" title="1"><span class="kw">say_hello</span>(<span class="st">&quot;Bob&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;Hello, Bob&quot;</code></pre>
<p>Guidelines you should try to stick to when naming functions:</p>
<ul>
<li>Names should be lowercase.</li>
<li>Use an underscore, <code>_</code>, to separate words within a name.</li>
<li>Generally, function names should use verbs, as functions <em>do</em> things.</li>
<li>Strive for names that are concise and meaningful (this is not easy!).</li>
<li><p>Avoid existing function names in R, such as <code>length()</code>.</p></li>
<li><p>When naming objects, follow the same guidelines but instead use <em>nouns</em> instead of verbs.</p></li>
</ul>
</div>
<div id="exercises-1" class="section level3">
<h3><span class="header-section-number">0.6.4</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li>Rewrite your gravity script, implementing the latest function for
<code>calc_gravity</code>. And perform the following calculations.
You will need to do a bit of research to find the necessary numbers.</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li><p>What is the gravity at the surface of each of the planets in our Solar System (Mercury, Venus, Earth, Mars, Jupiter, Saturn, Uranus, Neptune)?</p></li>
<li><p>Produce a plot of the gravity on Mars, from the surface (0m) up to
the orbit height of Phobos (Mars’ first moon).</p></li>
</ol>
<pre><code>Hint: Use the &quot;semi-major axis&quot; of
Phobos&#39; orbit as the orbit height. This is because Phobos has an elliptical
orbit.</code></pre>
<div class="figure"><span id="fig:unnamed-chunk-55"></span>
<img src="week0/Planets2013.jpg" alt="The Sun and planets of the Solar System. Sizes but not distances are to scale. (Image from Wikimedia Commons)" width="0.7\linewidth" />
<p class="caption">
Figure 0.5: The Sun and planets of the Solar System. Sizes but not distances are to scale. (Image from Wikimedia Commons)
</p>
</div>
<ol start="2" style="list-style-type: decimal">
<li>A good recipe book will state all its baking temperatures in terms of
Gas Mark, degrees Celsius, and degrees Fahrenheit. A lazy book will pick one,
and simply provide a conversion table. The rubbish ones will offer no such
table. In those instances, I often have to manually convert the numbers
myself. Or rather I write a function that I can repeatedly use
(which is also what you are about to do).</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li><p>Create and save a new script for this exercise. Look up the
calculation for converting Fahrenheit to Celsius.
Implement a function which takes a temperature in Fahrenheit and returns
it in Celsius, call it <code>degF_to_degC</code>.</p></li>
<li><p>Look up the conversion for Fahrenheit to Gas Mark, and implement this
as <code>degF_to_gas()</code>.</p></li>
</ol>
<pre><code>Hint: You may need to make use of the `ceiling()`, `floor()`
and `round()` functions:</code></pre>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" title="1">x &lt;-<span class="st"> </span><span class="fl">5.4567218</span></a>
<a class="sourceLine" id="cb114-2" title="2"><span class="kw">ceiling</span>(x)</a></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" title="1"><span class="kw">floor</span>(x)</a></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb118-1" title="1"><span class="kw">round</span>(x)</a></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" title="1"><span class="kw">round</span>(x, <span class="dv">3</span>)</a></code></pre></div>
<pre><code>## [1] 5.457</code></pre>
<ol start="3" style="list-style-type: lower-alpha">
<li><p>Implement the conversion of Celsius to Gas Mark,
<code>degC_to_gas()</code>, using the previous two functions.</p></li>
<li><p>Confirm the following approximate conversions:</p></li>
</ol>
<table>
<thead>
<tr class="header">
<th>Celsius</th>
<th>Gas Mark</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>140</td>
<td>1</td>
</tr>
<tr class="even">
<td>150</td>
<td>2</td>
</tr>
<tr class="odd">
<td>160</td>
<td>3</td>
</tr>
<tr class="even">
<td>180</td>
<td>4</td>
</tr>
<tr class="odd">
<td>190</td>
<td>5</td>
</tr>
<tr class="even">
<td>200</td>
<td>6</td>
</tr>
<tr class="odd">
<td>220</td>
<td>7</td>
</tr>
<tr class="even">
<td>230</td>
<td>8</td>
</tr>
<tr class="odd">
<td>240</td>
<td>9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>The web-browser, Firefox, is one example of many open-source software projects.<a href="introduction-to-r.html#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>Tux the penguin is the mascot for the Linux operating system.<a href="introduction-to-r.html#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>You may remember
this from School as BODMAS: Brackets, Orders (powers, square roots), Division, Multiplication, Addition, Subtraction<a href="introduction-to-r.html#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p>What does this actually mean? It means that after falling for 1 second we will
be travelling at 9.82 metres per second. After 2 seconds, our speed will now be
19.6 metres per second. Every second we fall, our speed increases by 9.82. But
as you will soon see, this acceleration is dependent on how far we are from the
surface. Though, in practice there is a limit to how fast you can fall, this
limit is called your terminal velocity.<a href="introduction-to-r.html#fnref4" class="footnote-back">↩</a></p></li>
<li id="fn5"><p>The same rules apply for objects. Except you should try to use nouns rather than verbs.<a href="introduction-to-r.html#fnref5" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-manipulation-and-plotting-in-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
